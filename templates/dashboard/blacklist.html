{% extends 'dashboard/base.html' %}

{% block content %}
<div class="row" style="">
    <div class="box">
        <p>Na tej stronie znajdują się adresy IP, które są na stałe zablokowane — bot nigdy ich automatycznie nie odblokuje.
Odblokowanie adresu możliwe jest tylko ręcznie, poprzez wybranie go z listy.
Możesz tu także na stałe zablokować nowe adresy IP.</p>
    </div>

    <div class="box">
        <h2>Wpisz sieć IP do zablokowania</h2>
        <form method="POST" action="{% url 'add-address-to-list' 'blacklist' %}">
            {% csrf_token %}
            <div class="ipAdress">
                <input type="text" placeholder="Adres Ip" name="address" id="address" required>
                <input type="number" step="1" max="32" min="0" value="32" name="mask">
            </div>
            <input type="text" placeholder="Komentarz (opcjonalne)" name="comment">
            <button class="button">Potwierdz</button>
        </form>
    </div>
</div>

    <div class="box">
        <h2>Aktualnie zablokowane adresy</h2>
    </div>

<div class="box">
{% if blacklist %}

    <h2>Blacklist</h2>
    <div class="list">
{#        <div class="listElement row box">#}
{#        <strong>Sieć</strong>#}
{#        <strong>Komentarz</strong>#}
{#        </div>#}
        {% for el in blacklist %}

        <div class="listElement row box">
            <strong>{{ el.network }}</strong>

            {% if el.comment %}
            <p>{{ el.comment }}</p>
            {% else %}
            <p> Brak</p>
            {% endif %}

            <form action="{% url 'delete_ip' 'blacklist' el.id %}" method="POST"
                onsubmit="return confirm('Na pewno chcesz usunąć {{ el.network }}?');">

                {% csrf_token %}
                <button type="submit" class="logout_button">Usuń</button>
            </form>


        </div>

        {% endfor %}

    </div>
{% else %}
    <h2>Lista jest pusta</h2>
{% endif %}
</div>




{% endblock %}