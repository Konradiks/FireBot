{% extends 'dashboard/base.html' %}

{% block content %}
<div class="row" style="">
    <div class="box">
        <p> Na tej stronie możesz dodać lub usunąć adres z czarnej listy. Oznacza to, że jeśli adres zostanie zablokowany, nie będzie później sugerowany do odblokowania. Operacje na czarnej liście są dostępne wyłącznie w tym widoku. Możesz również odblokować każdy aktualnie blokowany adres IP. </p>

    </div>

    <div class="box">
        <h2>Dodaj adres do blacklist</h2>
        <h4>Podając adres ip i maskę sieci</h4>
        <form method="POST" action="{% url 'add-address-to-list' 'blacklist' %}">
            {% csrf_token %}
            <div class="ipAdress">
                <input type="text" placeholder="Adres Ip" name="address" id="address" required>
                <input type="number" step="1" max="32" min="0" value="32" name="mask">
            </div>
            <input type="text" placeholder="Komentarz (opcjonalne)" name="comment">
            <button class="button">Potwierdz</button>
        </form>
    </div>
</div>
<div class="row">
    <div class="box">
        {% if block_list %}
            <h2>Aktualnie blokowane adresy:</h2>
            <div class="list">
                {% for el in block_list %}

                        <form action="{% url 'dashboard:gen_unblock_command' %}" method="POST" class="listElement row box center"
                              onsubmit="return confirm('Na pewno chcesz odblokować {{ el.address }}?');">

                            <input type="hidden" name="addresses" value="{{ el.address }}">
                            <button type="submit" class="logout_button">Odblokuj</button>
                            <p>{{ el }}</p>
                            {% csrf_token %}

                        </form>

                {% endfor %}
            </div>
        {% else %}
            <h3>Brak aktualnie blokowanych adresów</h3>
        {% endif %}
    </div>

<div class="box">
{% if blacklist %}

    <h2>Blacklist</h2>
    <div class="list">
{#        <div class="listElement row box">#}
{#        <strong>Sieć</strong>#}
{#        <strong>Komentarz</strong>#}
{#        </div>#}
        {% for el in blacklist %}
            <form action="{% url 'delete_ip' 'blacklist' el.id %}" method="POST"
                onsubmit="return confirm('Na pewno chcesz usunąć {{ el.network }}?');">
                <div class="listElement row box center">
                    <button type="submit" class="logout_button">Usuń</button>
                    <strong>{{ el.network }}</strong>

                    {% if el.comment %}
                    <p>{{ el.comment }}</p>
                    {% else %}
                    <p> Brak</p>
                    {% endif %}
                    {% csrf_token %}
            </form>
        </div>

        {% endfor %}

    </div>
{% else %}
    <h2>Lista jest pusta</h2>
{% endif %}
</div>
    </div>




{% endblock %}